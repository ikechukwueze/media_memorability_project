{% load static %}

<!doctype html>
<html lang="en" class="h-100" data-bs-theme="auto">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
  <meta name="generator" content="Hugo 0.111.3">
  <title>Cover Template Â· Bootstrap v5.3</title>

  <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/cover/">





  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">



  <style>

  </style>


  <!-- Custom styles for this template -->
  <link href="{% static 'css/cover.css' %}" rel="stylesheet">
</head>

<body class="d-flex h-100 text-center ">
  <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
    <header class="mb-auto">
      <div>
        <h3 class="float-md-start mb-0">VidMem</h3>
        <nav class="nav nav-masthead justify-content-center float-md-end">
          <a class="nav-link fw-bold py-1 px-0 active" aria-current="page" href="#">Home</a>
          <a class="nav-link fw-bold py-1 px-0" href="#">Scores</a>
        </nav>
      </div>
    </header>

    <main class="px-3">
      <h2>How memorable are your videos?</h2>
      <p class="lead">Use A.I to predict how memorable your videos are.</p>
      <form action="" id="uploadForm" enctype="multipart/form-data">
        <div class="container mt-3 p-5 bg-light rounded-3">
          <div class="mb-4">
            <label for="video-title" class="form-label">Video Title</label>
            <input class="form-control form-control-sm" id="video-title" name="video_name" requiredx>
          </div>
          <div class="mb-4">
            <label for="video" class="form-label">Select Video</label>
            <input class="form-control form-control-sm" id="video" name="video" type="file" requiredx
              accept="video/mp4,video/mkv, video/x-m4v,video/*">
          </div>
          <div class="mb-3">
            <label for="video-description" class="form-label">Add Video Description
              <small>(Optional)</small></label>
            <textarea class="form-control" id="video-description" rows="3" maxlength="280" name="caption"
              spellcheck="false"></textarea>
          </div>
          <div class="col-12 mb-3">
            <!-- <button type="submit" class="btn btn-sm btn-primary" data-bs-toggle="modal"
              data-bs-target="#exampleModal">Upload Video</button> -->
            <button type="submit" class="btn btn-sm btn-primary">Upload Video</button>
          </div>
        </div>
      </form>

    </main>


    <!-- Modal -->
    <div class="modal fade" id="exampleModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
      aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-subtle-light">
          <div class="modal-header border-0">
            <button type="button" class="btn-close" data-bs-xdismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body text-center fs-5">
            <div class="card text-center mb-3 bg-subtle-light">
              <div class="card-body">
                <h5 class="card-title">Memorability Score</h5>
                <!-- <p class="card-text fw-bold fs-1" id="video_score">0.2</p> -->
                <div class="spinner-border" role="status" id="video_score">
                  <span class="sr-only"></span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


    <!-- Modal -->
    <div class="modal fade" id="exampleModal2" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
      aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-subtle-light">
          <div class="modal-header border-0">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body text-center fs-5">
            <div class="card text-center mb-3 bg-subtle-light">
              <div class="card-body">
                <h5 class="card-title">Warning</h5>
                <p class="card-text text-center" id="video_score">The video exceeds the file size limit of 5 MB.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer class="mt-auto text-white-50">
      <!-- <p>Cover template for <a href="https://getbootstrap.com/" class="text-white">Bootstrap</a>, by <a
          href="https://twitter.com/mdo" class="text-white">@mdo</a>.</p> -->
    </footer>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"
    integrity="sha384-zYPOMqeu1DAVkHiLqWBUTcbYfZ8osu1Nd6Z89ify25QV9guujx43ITvfi12/QExE"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js"
    integrity="sha384-Y4oOpwW3duJdCWv5ly8SCFYWqFDsfob/3GkgExXKV4idmbt98QcxXYs9UoXAB7BZ"
    crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.7.0.js" integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM="
    crossorigin="anonymous"></script>
  <script src="{% static 'js/script.js' %}"></script>

  <!-- <script>

    const upload_form = document.getElementById("uploadForm")

    $(".btn-close").click(function (e) {
      $('#exampleModal').modal('hide');
      
    })

    $("#uploadForm").on("submit", async function (e) {
      e.preventDefault()

      $("#video_score").replaceWith("<div class='spinner-border' role='status' id='video_score'><span class='sr-only'></span></div>");
      $('#exampleModal').modal('show');

      var form_data = new FormData(upload_form)
      form_data.append("csrfmiddlewaretoken", "{{ csrf_token }}");

      await $.ajax({
        method: "POST",
        url: "/videos/",
        processData: false,
        contentType: false,
        data: form_data,
        success: function (res) {
          $("#uploadForm").trigger("reset");

          $("#video_score").replaceWith(`<p class='card-text fw-bold fs-1' id='video_score'>${res.score}</p>`);
        },
        error: function (jqXHR, textStatus, errorThrown) {
          console.log(errorThrown)
          $("#video_score").replaceWith(`<p class='card-text fs-6' id='video_score'>An error has occured.</p>`);
        }
      })
    })



  </script> -->
</body>

</html>